{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/core-types.ts","../src/core-utils.ts","../src/core-resizing.ts","../src/core-dragging.ts","../src/core.ts","../src/core-react.ts","../src/components/Centered.tsx","../src/components/CenteredVertically.tsx","../src/components/Space.tsx","../src/components/Anchored.tsx","../src/components/Custom.tsx","../src/components/Fill.tsx","../src/components/Fixed.tsx","../src/components/Layer.tsx","../src/components/Positioned.tsx","../src/components/SpaceInfo.tsx","../src/components/ViewPort.tsx","../src/components/Options.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export type ResizeMouseEvent = React.MouseEvent<HTMLElement, MouseEvent>;\r\nexport type ResizeTouchEvent = React.TouchEvent<HTMLElement>;\r\nexport type OnResizeStart = ((resizeType?: ResizeType) => void | boolean) | undefined;\r\nexport type OnResizeEnd = ((newSize: SizeUnit, domRect: DOMRect, resizeType?: ResizeType) => void) | undefined;\r\nexport type OnDragEnd = (position: IPosition, moved: boolean) => void;\r\n\r\nexport enum Type {\r\n\tViewPort = \"viewport\",\r\n\tFixed = \"fixed\",\r\n\tFill = \"fill\",\r\n\tPositioned = \"positioned\",\r\n\tAnchored = \"anchored\",\r\n\tCustom = \"custom\",\r\n}\r\n\r\nexport enum AnchorType {\r\n\tLeft = \"anchor-left\",\r\n\tRight = \"anchor-right\",\r\n\tTop = \"anchor-top\",\r\n\tBottom = \"anchor-bottom\",\r\n}\r\n\r\nexport enum Orientation {\r\n\tHorizontal,\r\n\tVertical,\r\n}\r\n\r\nexport type SizeUnit = number | string | undefined;\r\n\r\nexport enum ResizeType {\r\n\tLeft = \"resize-left\",\r\n\tRight = \"resize-right\",\r\n\tTop = \"resize-top\",\r\n\tBottom = \"resize-bottom\",\r\n\tTopLeft = \"resize-topleft\",\r\n\tTopRight = \"resize-topright\",\r\n\tBottomLeft = \"resize-bottomleft\",\r\n\tBottomRight = \"resize-bottomright\",\r\n}\r\n\r\nexport enum ResizeHandlePlacement {\r\n\tOverlayInside = \"overlay-inside\",\r\n\tInside = \"inside\",\r\n\tOverlayBoundary = \"overlay-boundary\",\r\n}\r\n\r\nexport enum CenterType {\r\n\tNone = \"none\",\r\n\tVertical = \"vertical\",\r\n\tHorizontalVertical = \"horizontalVertical\",\r\n}\r\n\r\nexport enum MoveEvent {\r\n\tMouse = \"mousemove\",\r\n\tTouch = \"touchmove\",\r\n}\r\n\r\nexport enum EndEvent {\r\n\tMouse = \"mouseup\",\r\n\tTouch = \"touchend\",\r\n}\r\n\r\nexport interface ICommonProps {\r\n\tid?: string;\r\n\tclassName?: string;\r\n\tcenterContent?: CenterType;\r\n\tzIndex?: number;\r\n\tscrollable?: boolean;\r\n\ttrackSize?: boolean;\r\n\tallowOverflow?: boolean;\r\n}\r\n\r\nexport interface ISpaceProps extends ICommonProps {\r\n\ttype: Type;\r\n\tanchor?: AnchorType | undefined;\r\n\torder?: number | undefined;\r\n\tposition?: IPositionalProps | undefined;\r\n\thandleSize?: number | undefined;\r\n\thandlePlacement?: ResizeHandlePlacement;\r\n\ttouchHandleSize?: number | undefined;\r\n\tminimumSize?: number | undefined;\r\n\tmaximumSize?: number | undefined;\r\n\tonResizeStart?: OnResizeStart;\r\n\tonResizeEnd?: OnResizeEnd;\r\n}\r\n\r\nexport interface ISpaceStore {\r\n\tgetSpaces: () => ISpaceDefinition[];\r\n\tgetSpace: (id: string) => ISpaceDefinition | undefined;\r\n\taddSpace: (space: ISpaceDefinition) => void;\r\n\tupdateSpace: (space: ISpaceDefinition, props: ISpaceProps) => void;\r\n\tupdateStyles: (space: ISpaceDefinition) => void;\r\n\tremoveSpace: (space: ISpaceDefinition) => void;\r\n\tcreateSpace: (parent: string | undefined, props: ISpaceProps, update: () => void) => ISpaceDefinition;\r\n\tstartMouseResize: (resizeType: ResizeType, space: ISpaceDefinition, event: React.MouseEvent<HTMLElement>, onResizeEnd?: OnResizeEnd) => void;\r\n\tstartTouchResize: (resizeType: ResizeType, space: ISpaceDefinition, event: React.TouchEvent<HTMLElement>, onResizeEnd?: OnResizeEnd) => void;\r\n\tstartMouseDrag: (space: ISpaceDefinition, event: ResizeMouseEvent, onDragEnd?: OnDragEnd) => void;\r\n\tstartTouchDrag: (space: ISpaceDefinition, event: ResizeTouchEvent, onDragEnd?: OnDragEnd) => void;\r\n}\r\n\r\nexport interface IPosition {\r\n\tleft?: SizeUnit | undefined;\r\n\ttop?: SizeUnit | undefined;\r\n\tright?: SizeUnit | undefined;\r\n\tbottom?: SizeUnit | undefined;\r\n\twidth?: SizeUnit | undefined;\r\n\theight?: SizeUnit | undefined;\r\n}\r\n\r\nexport interface IPositionalProps extends IPosition {\r\n\tleftResizable?: boolean;\r\n\ttopResizable?: boolean;\r\n\trightResizable?: boolean;\r\n\tbottomResizable?: boolean;\r\n}\r\n\r\nexport interface ISize {\r\n\tsize: SizeUnit;\r\n\tadjusted: SizeUnit[];\r\n\tresized: number;\r\n}\r\n\r\nexport interface ISpaceDefinition {\r\n\tupdate: () => void;\r\n\tupdateParent: () => void;\r\n\tadjustLeft: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustRight: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustTop: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustBottom: (adjusted: SizeUnit[]) => boolean;\r\n\tadjustEdge: (adjusted: SizeUnit[]) => boolean;\r\n\tanchoredChildren: (children: ISpaceDefinition[], anchor: AnchorType, zIndex: number) => ISpaceDefinition[];\r\n\tonResizeStart?: OnResizeStart;\r\n\tonResizeEnd?: OnResizeEnd;\r\n\telement: HTMLElement;\r\n\tid: string;\r\n\ttype: Type;\r\n\tanchor?: AnchorType;\r\n\torientation: Orientation;\r\n\tscrollable: boolean;\r\n\torder?: number;\r\n\tposition: \"fixed\" | \"absolute\" | \"relative\";\r\n\tchildren: ISpaceDefinition[];\r\n\tparentId: string | undefined;\r\n\tstore: ISpaceStore;\r\n\tleft: ISize;\r\n\ttop: ISize;\r\n\tright: ISize;\r\n\tbottom: ISize;\r\n\twidth: ISize;\r\n\theight: ISize;\r\n\tzIndex: number;\r\n\tdimension: DOMRect;\r\n\tcenterContent: \"none\" | \"vertical\" | \"horizontalVertical\";\r\n\tresizing: boolean;\r\n\tminimumSize?: number;\r\n\tmaximumSize?: number;\r\n\thandleSize: number;\r\n\ttouchHandleSize: number;\r\n\thandlePlacement: ResizeHandlePlacement;\r\n\tcanResizeTop: boolean;\r\n\tcanResizeLeft: boolean;\r\n\tcanResizeRight: boolean;\r\n\tcanResizeBottom: boolean;\r\n\tallowOverflow: boolean;\r\n}\r\n\r\nexport interface ISpaceContext {\r\n\tsize: DOMRect;\r\n\tlayer: number;\r\n\tstartMouseDrag: (e: ResizeMouseEvent, onDragEnd?: OnDragEnd) => void;\r\n\tstartTouchDrag: (e: ResizeTouchEvent, onDragEnd?: OnDragEnd) => void;\r\n\tforceUpdate: () => void;\r\n}\r\n","import { ISpaceDefinition, SizeUnit, ISize, ResizeHandlePlacement, Type } from \"./core-types\";\r\n\r\nexport function shortuuid() {\r\n\tlet firstPart = (Math.random() * 46656) | 0;\r\n\tlet secondPart = (Math.random() * 46656) | 0;\r\n\treturn (\"000\" + firstPart.toString(36)).slice(-3) + (\"000\" + secondPart.toString(36)).slice(-3);\r\n}\r\n\r\nexport function getSizeString(size: SizeUnit) {\r\n\treturn typeof size === \"string\" ? size : `${size}px`;\r\n}\r\n\r\nexport function css(size: ISize, dontAddCalc?: boolean) {\r\n\tif (size.size === 0 && size.adjusted.length === 0 && size.resized === 0) {\r\n\t\treturn `0px`;\r\n\t}\r\n\r\n\tconst parts: string[] = [];\r\n\tif (size.size !== undefined) {\r\n\t\tparts.push(getSizeString(size.size));\r\n\t}\r\n\r\n\tsize.adjusted.forEach((l) => parts.push(getSizeString(l)));\r\n\r\n\tif (size.resized !== 0) {\r\n\t\tparts.push(getSizeString(size.resized));\r\n\t}\r\n\r\n\tif (parts.length === 0) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tif (parts.length === 1) {\r\n\t\treturn parts[0];\r\n\t}\r\n\r\n\tif (dontAddCalc) {\r\n\t\treturn parts.join(\" + \");\r\n\t}\r\n\r\n\treturn `calc(${parts.join(\" + \")})`;\r\n}\r\n\r\nexport function coalesce<T>(...args: T[]) {\r\n\treturn args.find((x) => x !== null && x !== undefined);\r\n}\r\n\r\nexport function adjustmentsEqual(item1: SizeUnit[], item2: SizeUnit[]) {\r\n\tif (item1.length !== item2.length) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfor (var i = 0, len = item1.length; i < len; i++) {\r\n\t\tif (item1[i] !== item2[i]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function throttle<F extends (...args: any) => any>(callback: F, limit: number) {\r\n\tvar wait = false; // Initially, we're not waiting\r\n\treturn function(...args: any) {\r\n\t\t// We return a throttled function\r\n\t\tif (!wait) {\r\n\t\t\t// If we're not waiting\r\n\t\t\tcallback(...args); // Execute users function\r\n\t\t\twait = true; // Prevent future invocations\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t// After a period of time\r\n\t\t\t\twait = false; // And allow future invocations\r\n\t\t\t}, limit);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function styleDefinition(space: ISpaceDefinition) {\r\n\tconst cssElements: string[] = [];\r\n\r\n\tconst style: React.CSSProperties = {\r\n\t\tposition: space.position,\r\n\t\tleft: css(space.left),\r\n\t\ttop: css(space.top),\r\n\t\tright: css(space.right),\r\n\t\tbottom: css(space.bottom),\r\n\t\twidth: css(space.width),\r\n\t\theight: css(space.height),\r\n\t\tzIndex: space.zIndex,\r\n\t};\r\n\r\n\tconst cssString: string[] = [];\r\n\r\n\tif (style.position) {\r\n\t\tcssString.push(`position: ${style.position};`);\r\n\t}\r\n\tif (style.left) {\r\n\t\tcssString.push(`left: ${style.left};`);\r\n\t}\r\n\tif (style.top) {\r\n\t\tcssString.push(`top: ${style.top};`);\r\n\t}\r\n\tif (style.right) {\r\n\t\tcssString.push(`right: ${style.right};`);\r\n\t}\r\n\tif (style.bottom) {\r\n\t\tcssString.push(`bottom: ${style.bottom};`);\r\n\t}\r\n\tif (style.width) {\r\n\t\tcssString.push(`width: ${style.width};`);\r\n\t}\r\n\tif (style.height) {\r\n\t\tcssString.push(`height: ${style.height};`);\r\n\t}\r\n\tif (style.zIndex) {\r\n\t\tcssString.push(`z-index: ${style.zIndex};`);\r\n\t}\r\n\tif (space.allowOverflow) {\r\n\t\tcssString.push(\"overflow: visible;\");\r\n\t}\r\n\r\n\tif (cssString.length > 0) {\r\n\t\tcssElements.push(`#${space.id} { ${cssString.join(\" \")} }`);\r\n\t}\r\n\r\n\tif (space.scrollable) {\r\n\t\tcssElements.push(`#${space.id} > .spaces-space-inner { overflow: auto; touch-action: auto; }`);\r\n\t}\r\n\r\n\tlet handleOffset = 0;\r\n\tconst touchHandleSize = space.touchHandleSize / 2 - space.handleSize / 2;\r\n\r\n\tswitch (space.handlePlacement) {\r\n\t\tcase ResizeHandlePlacement.Inside:\r\n\t\tcase ResizeHandlePlacement.OverlayInside:\r\n\t\t\thandleOffset = space.handleSize;\r\n\t\t\tif (space.type === Type.Positioned) {\r\n\t\t\t\thandleOffset = 0;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ResizeHandlePlacement.OverlayBoundary:\r\n\t\t\thandleOffset = space.handleSize / 2;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tif (space.type === Type.Positioned) {\r\n\t\tif (space.canResizeLeft) {\r\n\t\t\tcssElements.push(\r\n\t\t\t\t`#${space.id}-ml { left: calc(${css(space.left, true)} - ${handleOffset}px); width: ${space.handleSize}px; top: ${css(\r\n\t\t\t\t\tspace.top,\r\n\t\t\t\t)}; bottom: ${css(space.bottom)}; height: ${css(space.height)}; }`,\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (space.canResizeTop) {\r\n\t\t\tcssElements.push(\r\n\t\t\t\t`#${space.id}-mt { top: calc(${css(space.top, true)} - ${handleOffset}px); height: ${space.handleSize}px; left: ${css(\r\n\t\t\t\t\tspace.left,\r\n\t\t\t\t)}; right: ${css(space.right)}; width: ${css(space.width)}; }`,\r\n\t\t\t);\r\n\t\t\tcssElements.push(\r\n\t\t\t\t`#${space.id}-mt:after { top: -${touchHandleSize}px; bottom: -${touchHandleSize}px; left: ${css(space.left)}; right: ${css(\r\n\t\t\t\t\tspace.right,\r\n\t\t\t\t)}; width: ${css(space.width)}; }`,\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (space.canResizeRight) {\r\n\t\t\tcssElements.push(`#${space.id}-mr:after { left: -${touchHandleSize}px; right: -${touchHandleSize}px; top: 0; bottom: 0; }`);\r\n\t\t\tif (space.width.size) {\r\n\t\t\t\tcssElements.push(\r\n\t\t\t\t\t`#${space.id}-mr { left: calc(${css(space.left, true)} + ${css(space.width, true)} - ${\r\n\t\t\t\t\t\tspace.handleSize\r\n\t\t\t\t\t}px + ${handleOffset}px); width: ${space.handleSize}px; top: ${css(space.top)}; bottom: ${css(space.bottom)}; height: ${css(\r\n\t\t\t\t\t\tspace.height,\r\n\t\t\t\t\t)}; }`,\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tcssElements.push(\r\n\t\t\t\t\t`#${space.id}-mr { right: calc(${css(space.right, true)} - ${handleOffset}px); width: ${space.handleSize}px; top: ${css(\r\n\t\t\t\t\t\tspace.top,\r\n\t\t\t\t\t)}; bottom: ${css(space.bottom)}; height: ${css(space.height)}; }`,\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tcssElements.push(`#${space.id}-mr:after { left: -${touchHandleSize}px; right: -${touchHandleSize}px; top: 0; bottom: 0; }`);\r\n\t\t}\r\n\r\n\t\tif (space.canResizeBottom) {\r\n\t\t\tif (space.height.size) {\r\n\t\t\t\tcssElements.push(\r\n\t\t\t\t\t`#${space.id}-mb { top: calc(${css(space.top, true)} + ${css(space.height, true)} - ${\r\n\t\t\t\t\t\tspace.handleSize\r\n\t\t\t\t\t}px + ${handleOffset}px); height: ${space.handleSize}px; left: ${css(space.left)}; right: ${css(space.right)}; width: ${css(\r\n\t\t\t\t\t\tspace.width,\r\n\t\t\t\t\t)}; }`,\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tcssElements.push(\r\n\t\t\t\t\t`#${space.id}-mb { bottom: calc(${css(space.bottom, true)} - ${handleOffset}px); height: ${space.handleSize}px; left: ${css(\r\n\t\t\t\t\t\tspace.left,\r\n\t\t\t\t\t)}; right: ${css(space.right)}; width: ${css(space.width)}; }`,\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tcssElements.push(`#${space.id}-mb:after { top: -${touchHandleSize}px; bottom: -${touchHandleSize}px; left: 0; right: 0; }`);\r\n\t\t}\r\n\t} else {\r\n\t\tif (space.canResizeLeft) {\r\n\t\t\tcssElements.push(\r\n\t\t\t\t`#${space.id}-ml { right: calc(${css(space.right, true)} + ${css(space.width, true)} - ${handleOffset}px); width: ${\r\n\t\t\t\t\tspace.handleSize\r\n\t\t\t\t}px; }`,\r\n\t\t\t);\r\n\t\t\tcssElements.push(`#${space.id}-ml:after { left: -${touchHandleSize}px; right: -${touchHandleSize}px; top: 0; bottom: 0; }`);\r\n\t\t}\r\n\r\n\t\tif (space.canResizeTop) {\r\n\t\t\tcssElements.push(\r\n\t\t\t\t`#${space.id}-mt { bottom: calc(${css(space.bottom, true)} + ${css(space.height, true)} - ${handleOffset}px); height: ${\r\n\t\t\t\t\tspace.handleSize\r\n\t\t\t\t}px; }`,\r\n\t\t\t);\r\n\t\t\tcssElements.push(`#${space.id}-mt:after { top: -${touchHandleSize}px; bottom: -${touchHandleSize}px; left: 0; right: 0; }`);\r\n\t\t}\r\n\r\n\t\tif (space.canResizeRight) {\r\n\t\t\tcssElements.push(\r\n\t\t\t\t`#${space.id}-mr { left: calc(${css(space.left, true)} + ${css(space.width, true)} - ${handleOffset}px); width: ${\r\n\t\t\t\t\tspace.handleSize\r\n\t\t\t\t}px; }`,\r\n\t\t\t);\r\n\t\t\tcssElements.push(`#${space.id}-mr:after { left: -${touchHandleSize}px; right: -${touchHandleSize}px; top: 0; bottom: 0; }`);\r\n\t\t}\r\n\r\n\t\tif (space.canResizeBottom) {\r\n\t\t\tcssElements.push(\r\n\t\t\t\t`#${space.id}-mb { top: calc(${css(space.top, true)} + ${css(space.height, true)} - ${handleOffset}px); height: ${\r\n\t\t\t\t\tspace.handleSize\r\n\t\t\t\t}px; }`,\r\n\t\t\t);\r\n\t\t\tcssElements.push(`#${space.id}-mb:after { top: -${touchHandleSize}px; bottom: -${touchHandleSize}px; left: 0; right: 0; }`);\r\n\t\t}\r\n\t}\r\n\r\n\treturn cssElements.join(\" \");\r\n}\r\n\r\nexport function updateStyleDefinition(space: ISpaceDefinition) {\r\n\tconst definition = styleDefinition(space);\r\n\tconst existing = document.getElementById(`style_${space.id}`);\r\n\r\n\tif (existing) {\r\n\t\tif (existing.innerHTML !== definition) {\r\n\t\t\texisting.innerHTML = definition;\r\n\t\t}\r\n\t} else {\r\n\t\tconst newStyle = document.createElement(\"style\");\r\n\t\tnewStyle.id = `style_${space.id}`;\r\n\t\tnewStyle.innerHTML = definition;\r\n\t\tdocument.head.appendChild(newStyle);\r\n\t}\r\n}\r\n\r\nexport function removeStyleDefinition(space: ISpaceDefinition) {\r\n\tconst existing = document.getElementById(`style_${space.id}`);\r\n\tif (existing) {\r\n\t\tdocument.head.removeChild(existing);\r\n\t}\r\n}\r\n","import { SyntheticEvent } from \"react\";\r\nimport { ISpaceDefinition, ResizeType, ISpaceStore, OnResizeEnd, EndEvent, MoveEvent, Type } from \"./core-types\";\r\nimport { coalesce, throttle } from \"./core-utils\";\r\n\r\nconst RESIZE_THROTTLE = 0;\r\n\r\nexport interface IResizeChange {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nfunction isHorizontal(resizeType: ResizeType) {\r\n\treturn resizeType === ResizeType.Left || resizeType === ResizeType.Right;\r\n}\r\n\r\ntype ResizeAdjuster = (currentX: number, currentY: number) => void;\r\n\r\nfunction createAdjuster(resizeType: ResizeType, space: ISpaceDefinition, originalX: number, originalY: number): ResizeAdjuster {\r\n\tconst dimensionToAdjust = (() => {\r\n\t\tif (resizeType === ResizeType.Left) {\r\n\t\t\treturn space.left;\r\n\t\t} else if (resizeType === ResizeType.Right) {\r\n\t\t\treturn space.right;\r\n\t\t} else if (resizeType === ResizeType.Bottom) {\r\n\t\t\treturn space.bottom;\r\n\t\t} else if (resizeType === ResizeType.Top) {\r\n\t\t\treturn space.top;\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"unknown resize type\");\r\n\t\t}\r\n\t})();\r\n\r\n\tconst negater = resizeType === ResizeType.Right || resizeType === ResizeType.Bottom ? (val: number) => -val : (val: number) => val;\r\n\r\n\tconst candidateOppositeDimensionToAdjust = isHorizontal(resizeType) ? space.width : space.height;\r\n\r\n\tconst offset1 = dimensionToAdjust.resized;\r\n\tconst offset2 = candidateOppositeDimensionToAdjust.resized;\r\n\r\n\tconst rect = space.element.getBoundingClientRect();\r\n\tconst size = isHorizontal(resizeType) ? rect.width : rect.height;\r\n\tconst minimumAdjust = coalesce(space.minimumSize, 20)! - size + 0;\r\n\tconst maximumAdjust = space.maximumSize ? space.maximumSize - size + 0 : undefined;\r\n\r\n\treturn (currentX: number, currentY: number) => {\r\n\t\tlet adjustment = (isHorizontal(resizeType) ? originalX : originalY) - (isHorizontal(resizeType) ? currentX : currentY);\r\n\t\tlet dimensionResized = negater(adjustment);\r\n\r\n\t\tif (space.type !== Type.Positioned) {\r\n\t\t\tdimensionResized = Math.max(negater(adjustment), minimumAdjust);\r\n\r\n\t\t\tif (dimensionResized < minimumAdjust) {\r\n\t\t\t\tdimensionResized = minimumAdjust;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof maximumAdjust === \"number\") {\r\n\t\t\t\tif (dimensionResized > maximumAdjust) {\r\n\t\t\t\t\tdimensionResized = maximumAdjust;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dimensionToAdjust.size !== undefined) {\r\n\t\t\tdimensionToAdjust.resized = negater(-adjustment) + offset1;\r\n\t\t\tif (candidateOppositeDimensionToAdjust.size) {\r\n\t\t\t\tcandidateOppositeDimensionToAdjust.resized = negater(adjustment) + offset2;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcandidateOppositeDimensionToAdjust.resized = dimensionResized + offset2;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function createResize(store: ISpaceStore) {\r\n\treturn {\r\n\t\tstartResize<T extends SyntheticEvent<HTMLElement> | MouseEvent | TouchEvent>(\r\n\t\t\te: T,\r\n\t\t\tresizeType: ResizeType,\r\n\t\t\tspace: ISpaceDefinition,\r\n\t\t\tendEvent: EndEvent,\r\n\t\t\tmoveEvent: MoveEvent,\r\n\t\t\tgetCoords: (event: T) => { x: number; y: number },\r\n\t\t\tonResizeEnd?: OnResizeEnd,\r\n\t\t) {\r\n\t\t\tif (space.onResizeStart) {\r\n\t\t\t\tconst result = space.onResizeStart(resizeType);\r\n\t\t\t\tif (typeof result === \"boolean\" && !result) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst originalCoords = getCoords(e);\r\n\t\t\tconst adjuster = createAdjuster(resizeType, space, originalCoords.x, originalCoords.y);\r\n\r\n\t\t\tspace.resizing = true;\r\n\t\t\tspace.updateParent();\r\n\r\n\t\t\tlet lastX = 0;\r\n\t\t\tlet lastY = 0;\r\n\t\t\tlet moved = false;\r\n\r\n\t\t\tconst resize = (currentX: number, currentY: number) => {\r\n\t\t\t\tadjuster(currentX, currentY);\r\n\t\t\t\tstore.updateStyles(space);\r\n\t\t\t};\r\n\r\n\t\t\tconst withPreventDefault = (e: T) => {\r\n\t\t\t\tmoved = true;\r\n\t\t\t\tconst newCoords = getCoords(e);\r\n\t\t\t\tlastX = newCoords.x;\r\n\t\t\t\tlastY = newCoords.y;\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthrottle((x, y) => window.requestAnimationFrame(() => resize(x, y)), RESIZE_THROTTLE)(lastX, lastY);\r\n\t\t\t};\r\n\r\n\t\t\tconst removeListener = () => {\r\n\t\t\t\tif (moved) {\r\n\t\t\t\t\tresize(lastX, lastY);\r\n\t\t\t\t}\r\n\t\t\t\twindow.removeEventListener(moveEvent, withPreventDefault as EventListener);\r\n\t\t\t\twindow.removeEventListener(endEvent, removeListener);\r\n\r\n\t\t\t\tspace.resizing = false;\r\n\t\t\t\tspace.updateParent();\r\n\r\n\t\t\t\tconst resizeEnd = onResizeEnd || space.onResizeEnd;\r\n\t\t\t\tif (resizeEnd) {\r\n\t\t\t\t\tconst currentRect = space.element.getBoundingClientRect();\r\n\t\t\t\t\tresizeEnd(Math.floor(isHorizontal(resizeType) ? currentRect.width : currentRect.height), currentRect as DOMRect, resizeType);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\twindow.addEventListener(moveEvent, withPreventDefault as EventListener);\r\n\t\t\twindow.addEventListener(endEvent, removeListener);\r\n\t\t},\r\n\t};\r\n}\r\n","import { SyntheticEvent } from \"react\";\nimport { ISpaceDefinition, ISpaceStore, EndEvent, MoveEvent, OnDragEnd } from \"./core-types\";\nimport { throttle } from \"./core-utils\";\n\nexport function createDrag(store: ISpaceStore) {\n\tfunction onMove(space: ISpaceDefinition, originalX: number, originalY: number, x: number, y: number) {\n\t\tconst adjustmentX = -(originalX - x);\n\t\tconst adjustmentY = -(originalY - y);\n\n\t\tspace.left.adjusted = [adjustmentX];\n\t\tspace.top.adjusted = [adjustmentY];\n\n\t\tif (space.right.size) {\n\t\t\tspace.right.adjusted = [-adjustmentX];\n\t\t}\n\n\t\tif (space.bottom.size) {\n\t\t\tspace.bottom.adjusted = [-adjustmentY];\n\t\t}\n\n\t\tstore.updateStyles(space);\n\t}\n\n\treturn {\n\t\tstartDrag<T extends SyntheticEvent<HTMLElement> | MouseEvent | TouchEvent>(\n\t\t\te: T,\n\t\t\tspace: ISpaceDefinition,\n\t\t\tendEvent: EndEvent,\n\t\t\tmoveEvent: MoveEvent,\n\t\t\tgetCoords: (event: T) => { x: number; y: number },\n\t\t\tonDragEnd?: OnDragEnd,\n\t\t) {\n\t\t\tif (space.element) {\n\t\t\t\tconst coords = getCoords(e);\n\t\t\t\tconst adjustedLeft = space.left.adjusted.length === 0 ? 0 : (space.left.adjusted[0] as number);\n\t\t\t\tconst adjustedTop = space.top.adjusted.length === 0 ? 0 : (space.top.adjusted[0] as number);\n\t\t\t\tconst originalMouseX = coords.x - adjustedLeft;\n\t\t\t\tconst originalMouseY = coords.y - adjustedTop;\n\t\t\t\tlet lastX = 0;\n\t\t\t\tlet lastY = 0;\n\t\t\t\tlet moved = false;\n\n\t\t\t\tconst mouseMove = (x: number, y: number) => onMove(space, originalMouseX, originalMouseY, x, y);\n\t\t\t\tconst throttledMouseMove = throttle<typeof mouseMove>(mouseMove, 5);\n\n\t\t\t\tconst withPreventDefault = (e: T) => {\n\t\t\t\t\tmoved = true;\n\t\t\t\t\tconst newCoords = getCoords(e);\n\t\t\t\t\tlastX = newCoords.x;\n\t\t\t\t\tlastY = newCoords.y;\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tthrottledMouseMove(lastX, lastY);\n\t\t\t\t};\n\n\t\t\t\tconst removeListener = () => {\n\t\t\t\t\tif (moved) {\n\t\t\t\t\t\tmouseMove(lastX, lastY);\n\t\t\t\t\t}\n\t\t\t\t\twindow.removeEventListener(moveEvent, withPreventDefault as EventListener);\n\t\t\t\t\twindow.removeEventListener(endEvent, removeListener);\n\n\t\t\t\t\tif (onDragEnd) {\n\t\t\t\t\t\tconst parentInfo = (space.parentId && store.getSpace(space.parentId)?.element.getBoundingClientRect()) || {\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\theight: 0,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst info = (({ left, top, right, bottom, width, height }) => ({ left, top, right, bottom, width, height }))(\n\t\t\t\t\t\t\tspace.element.getBoundingClientRect(),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tonDragEnd(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...info,\n\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\tleft: info.left - parentInfo.left,\n\t\t\t\t\t\t\t\t\ttop: info.top - parentInfo.top,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmoved,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\twindow.addEventListener(moveEvent, withPreventDefault as EventListener);\n\t\t\t\twindow.addEventListener(endEvent, removeListener);\n\t\t\t}\n\t\t},\n\t};\n}\n","import {\r\n\tISpaceDefinition,\r\n\tSizeUnit,\r\n\tAnchorType,\r\n\tType,\r\n\tOrientation,\r\n\tEndEvent,\r\n\tMoveEvent,\r\n\tISpaceStore,\r\n\tISpaceProps,\r\n\tCenterType,\r\n\tResizeHandlePlacement,\r\n} from \"./core-types\";\r\nimport { createResize } from \"./core-resizing\";\r\nimport { updateStyleDefinition, removeStyleDefinition, coalesce, adjustmentsEqual } from \"./core-utils\";\r\nimport { createDrag } from \"./core-dragging\";\r\n\r\nconst spaceDefaults: Partial<ISpaceDefinition> = {\r\n\tid: \"\",\r\n\tzIndex: 0,\r\n\tscrollable: false,\r\n\tresizing: false,\r\n\tallowOverflow: false,\r\n\tcenterContent: \"none\",\r\n\tdimension: { left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0, x: 0, y: 0, toJSON: () => \"\" },\r\n\thandleSize: 5,\r\n\ttouchHandleSize: 5,\r\n\thandlePlacement: ResizeHandlePlacement.OverlayInside,\r\n\tadjustLeft: () => false,\r\n\tadjustRight: () => false,\r\n\tadjustTop: () => false,\r\n\tadjustBottom: () => false,\r\n\tadjustEdge: () => false,\r\n\tanchoredChildren: () => [],\r\n};\r\n\r\nconst anchorTypes = [AnchorType.Left, AnchorType.Top, AnchorType.Right, AnchorType.Bottom];\r\n\r\nfunction getPosition(type: Type) {\r\n\tif (type === Type.ViewPort) {\r\n\t\treturn \"fixed\";\r\n\t}\r\n\tif (type === Type.Fixed) {\r\n\t\treturn \"relative\";\r\n\t}\r\n\treturn \"absolute\";\r\n}\r\n\r\nfunction getOrientation(anchor: AnchorType | undefined) {\r\n\treturn anchor === AnchorType.Bottom || anchor === AnchorType.Top ? Orientation.Vertical : Orientation.Horizontal;\r\n}\r\n\r\nfunction anchorUpdates(space: ISpaceDefinition) {\r\n\treturn [\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Left,\r\n\t\t\tupdate: space.adjustLeft,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Top,\r\n\t\t\tupdate: space.adjustTop,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Right,\r\n\t\t\tupdate: space.adjustRight,\r\n\t\t},\r\n\t\t{\r\n\t\t\tanchor: AnchorType.Bottom,\r\n\t\t\tupdate: space.adjustBottom,\r\n\t\t},\r\n\t];\r\n}\r\n\r\nfunction sizeInfoDefault(size: SizeUnit) {\r\n\treturn { size: size, adjusted: [], resized: 0 };\r\n}\r\n\r\nexport function createStore(): ISpaceStore {\r\n\tlet spaces: ISpaceDefinition[] = [];\r\n\r\n\tconst setSpaces = (newSpaces: ISpaceDefinition[]) => {\r\n\t\tspaces = newSpaces;\r\n\t};\r\n\r\n\tconst getSpace = (id: string) => {\r\n\t\treturn getSpaces().find((s) => s.id === id);\r\n\t};\r\n\r\n\tconst getSpaces = () => spaces;\r\n\r\n\tconst recalcSpaces = (parent: ISpaceDefinition) => {\r\n\t\tconst onlyUnique = (value: number, index: number, self: number[]) => {\r\n\t\t\treturn self.indexOf(value) === index;\r\n\t\t};\r\n\r\n\t\tconst addDefaultOrders = (spaces: ISpaceDefinition[]) => {\r\n\t\t\tlet result: ISpaceDefinition[] = [];\r\n\r\n\t\t\tanchorTypes.forEach((t) => {\r\n\t\t\t\tconst anchoredSpaces = spaces.filter((s) => s.anchor !== undefined && s.anchor === t);\r\n\t\t\t\tconst zIndices = anchoredSpaces.map((s) => s.zIndex).filter(onlyUnique);\r\n\t\t\t\tzIndices.forEach((i) => {\r\n\t\t\t\t\tconst anchoredSpacesInLayer = anchoredSpaces.filter((s) => s.zIndex === i);\r\n\t\t\t\t\tconst orderedSpaces = anchoredSpacesInLayer.filter((c) => c.order !== undefined);\r\n\t\t\t\t\tconst unorderedSpaces = anchoredSpacesInLayer.filter((c) => c.order === undefined);\r\n\t\t\t\t\tvar maxOrder = orderedSpaces.length > 0 ? orderedSpaces.map((a) => a.order!).reduce((a, b) => Math.max(a, b)) : 0;\r\n\t\t\t\t\tresult = [...result, ...[...orderedSpaces, ...unorderedSpaces.map((c, idx) => ({ ...c, ...{ order: maxOrder + idx + 1 } }))]];\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\treturn [...result, ...spaces.filter((s) => s.anchor === undefined)];\r\n\t\t};\r\n\r\n\t\tconst orderedSpaces = addDefaultOrders(parent.children);\r\n\t\tfor (var i = 0, len = orderedSpaces.length; i < len; i++) {\r\n\t\t\tconst space = orderedSpaces[i];\r\n\t\t\tlet changed = false;\r\n\r\n\t\t\tif (space.type === Type.Fill) {\r\n\t\t\t\tanchorUpdates(space).forEach((info) => {\r\n\t\t\t\t\tconst adjusted: SizeUnit[] = [];\r\n\t\t\t\t\tconst anchoredSpaces = parent.anchoredChildren(orderedSpaces, info.anchor, space.zIndex);\r\n\r\n\t\t\t\t\tanchoredSpaces.forEach((as) => {\r\n\t\t\t\t\t\tif (as.orientation === Orientation.Vertical) {\r\n\t\t\t\t\t\t\tif (as.height.size) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.height.size);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (as.height.resized) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.height.resized);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (as.width.size) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.width.size);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (as.width.resized) {\r\n\t\t\t\t\t\t\t\tadjusted.push(as.width.resized);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (info.update(adjusted)) {\r\n\t\t\t\t\t\tchanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (space.type === Type.Anchored) {\r\n\t\t\t\tconst adjusted: SizeUnit[] = [];\r\n\t\t\t\tconst anchoredSpaces = parent\r\n\t\t\t\t\t.anchoredChildren(orderedSpaces, space.anchor!, space.zIndex)\r\n\t\t\t\t\t.filter((s) => s.id !== space.id && s.order! <= space.order!);\r\n\r\n\t\t\t\tanchoredSpaces.forEach((as) => {\r\n\t\t\t\t\tif (as.orientation === Orientation.Vertical) {\r\n\t\t\t\t\t\tif (as.height.size) {\r\n\t\t\t\t\t\t\tadjusted.push(as.height.size);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (as.height.resized) {\r\n\t\t\t\t\t\t\tadjusted.push(as.height.resized);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (as.width.size) {\r\n\t\t\t\t\t\t\tadjusted.push(as.width.size);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (as.width.resized) {\r\n\t\t\t\t\t\t\tadjusted.push(as.width.resized);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (space.adjustEdge(adjusted)) {\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (changed) {\r\n\t\t\t\tupdateStyleDefinition(space);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst store: ISpaceStore = {\r\n\t\tgetSpaces: getSpaces,\r\n\t\tgetSpace: getSpace,\r\n\t\taddSpace: (space) => {\r\n\t\t\tgetSpaces().push(space);\r\n\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\tparentSpace.children.push(space);\r\n\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tupdateStyleDefinition(space);\r\n\t\t},\r\n\t\tremoveSpace: (space) => {\r\n\t\t\tsetSpaces(getSpaces().filter((s) => s.id !== space.id));\r\n\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\tparentSpace.children = parentSpace.children.filter((s) => s.id !== space.id);\r\n\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tremoveStyleDefinition(space);\r\n\t\t},\r\n\t\tupdateStyles: (space) => {\r\n\t\t\tif (space.parentId) {\r\n\t\t\t\tconst parent = getSpace(space.parentId);\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\trecalcSpaces(parent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tupdateStyleDefinition(space);\r\n\t\t},\r\n\t\tupdateSpace: (space, props) => {\r\n\t\t\tconst {\r\n\t\t\t\ttype,\r\n\t\t\t\tanchor,\r\n\t\t\t\torder,\r\n\t\t\t\tzIndex,\r\n\t\t\t\tscrollable,\r\n\t\t\t\tposition,\r\n\t\t\t\tcenterContent,\r\n\t\t\t\tminimumSize,\r\n\t\t\t\tmaximumSize,\r\n\t\t\t\thandleSize,\r\n\t\t\t\ttouchHandleSize,\r\n\t\t\t\thandlePlacement,\r\n\t\t\t\tallowOverflow,\r\n\t\t\t} = props;\r\n\t\t\tconst canResizeLeft = (position && position.leftResizable) || false;\r\n\t\t\tconst canResizeRight = (position && position.rightResizable) || false;\r\n\t\t\tconst canResizeTop = (position && position.topResizable) || false;\r\n\t\t\tconst canResizeBottom = (position && position.bottomResizable) || false;\r\n\r\n\t\t\tlet changed = false;\r\n\r\n\t\t\tif (space.type !== type) {\r\n\t\t\t\tspace.type = type;\r\n\t\t\t\tspace.position = getPosition(type);\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.anchor !== anchor) {\r\n\t\t\t\tspace.anchor = anchor;\r\n\t\t\t\tspace.orientation = getOrientation(anchor);\r\n\t\t\t\tchanged = true;\r\n\r\n\t\t\t\tif (type === Type.Anchored) {\r\n\t\t\t\t\tif (anchor === AnchorType.Left) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustLeft;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustTop;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustRight;\r\n\t\t\t\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\t\t\t\tspace.adjustEdge = space.adjustBottom;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (space.left.size !== (position && position.left)) {\r\n\t\t\t\tspace.left.size = position && position.left;\r\n\t\t\t\tspace.left.resized = 0;\r\n\t\t\t\tspace.left.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.right.size !== (position && position.right)) {\r\n\t\t\t\tspace.right.size = position && position.right;\r\n\t\t\t\tspace.right.resized = 0;\r\n\t\t\t\tspace.right.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.top.size !== (position && position.top)) {\r\n\t\t\t\tspace.top.size = position && position.top;\r\n\t\t\t\tspace.top.resized = 0;\r\n\t\t\t\tspace.top.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.bottom.size !== (position && position.bottom)) {\r\n\t\t\t\tspace.bottom.size = position && position.bottom;\r\n\t\t\t\tspace.bottom.resized = 0;\r\n\t\t\t\tspace.bottom.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.width.size !== (position && position.width)) {\r\n\t\t\t\tspace.width.size = position && position.width;\r\n\t\t\t\tspace.width.resized = 0;\r\n\t\t\t\tspace.width.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.height.size !== (position && position.height)) {\r\n\t\t\t\tspace.height.size = position && position.height;\r\n\t\t\t\tspace.height.resized = 0;\r\n\t\t\t\tspace.height.adjusted = [];\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.order, 0) !== coalesce(order, 0)) {\r\n\t\t\t\tspace.order = coalesce(order, 0)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.zIndex, 0) !== coalesce(zIndex, 0)) {\r\n\t\t\t\tspace.zIndex = coalesce(zIndex, 0)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.scrollable, false) !== coalesce(scrollable, false)) {\r\n\t\t\t\tspace.scrollable = coalesce(scrollable, false)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.minimumSize !== minimumSize) {\r\n\t\t\t\tspace.minimumSize = minimumSize;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.maximumSize !== maximumSize) {\r\n\t\t\t\tspace.maximumSize = maximumSize;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (coalesce(space.centerContent, CenterType.None) !== coalesce(centerContent, CenterType.None)) {\r\n\t\t\t\tspace.centerContent = coalesce(centerContent, CenterType.None)!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.handleSize !== handleSize) {\r\n\t\t\t\tspace.handleSize = handleSize || spaceDefaults.handleSize!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.touchHandleSize !== touchHandleSize) {\r\n\t\t\t\tspace.touchHandleSize = touchHandleSize || spaceDefaults.touchHandleSize!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.handlePlacement !== handlePlacement) {\r\n\t\t\t\tspace.handlePlacement = handlePlacement || spaceDefaults.handlePlacement!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeBottom !== canResizeBottom) {\r\n\t\t\t\tspace.canResizeBottom = canResizeBottom;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeTop !== canResizeTop) {\r\n\t\t\t\tspace.canResizeTop = canResizeTop;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeLeft !== canResizeLeft) {\r\n\t\t\t\tspace.canResizeLeft = canResizeLeft;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.canResizeRight !== canResizeRight) {\r\n\t\t\t\tspace.canResizeRight = canResizeRight;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (space.allowOverflow !== allowOverflow) {\r\n\t\t\t\tspace.allowOverflow = allowOverflow || spaceDefaults.allowOverflow!;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (changed) {\r\n\t\t\t\tif (space.parentId) {\r\n\t\t\t\t\tconst parentSpace = getSpace(space.parentId);\r\n\t\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\t\trecalcSpaces(parentSpace);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tupdateStyleDefinition(space);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateSpace: () => ({} as ISpaceDefinition),\r\n\t\tstartMouseResize: () => null,\r\n\t\tstartTouchResize: () => null,\r\n\t\tstartMouseDrag: () => null,\r\n\t\tstartTouchDrag: () => null,\r\n\t};\r\n\r\n\tconst resize = createResize(store);\r\n\tconst drag = createDrag(store);\r\n\r\n\tstore.createSpace = (parentId: string | undefined, props: ISpaceProps, update: () => void) => {\r\n\t\tconst { position, anchor, type, ...commonProps } = props;\r\n\t\tconst canResizeLeft = (position && position.rightResizable) || false;\r\n\t\tconst canResizeRight = (position && position.leftResizable) || false;\r\n\t\tconst canResizeTop = (position && position.bottomResizable) || false;\r\n\t\tconst canResizeBottom = (position && position.topResizable) || false;\r\n\r\n\t\tconst newSpace: ISpaceDefinition = {\r\n\t\t\t...spaceDefaults,\r\n\t\t\t...commonProps,\r\n\t\t\t...{\r\n\t\t\t\tstore: store,\r\n\t\t\t\tupdate: update,\r\n\t\t\t\tupdateParent: () => {\r\n\t\t\t\t\tif (parentId) {\r\n\t\t\t\t\t\tconst parentSpace = store.getSpace(parentId);\r\n\t\t\t\t\t\tif (parentSpace) {\r\n\t\t\t\t\t\t\tparentSpace.update();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tparentId: parentId,\r\n\t\t\t\tchildren: [],\r\n\t\t\t\tanchor: anchor,\r\n\t\t\t\ttype: type,\r\n\t\t\t\torientation: getOrientation(anchor),\r\n\t\t\t\tposition: getPosition(type),\r\n\t\t\t\tleft: sizeInfoDefault(position && position.left),\r\n\t\t\t\tright: sizeInfoDefault(position && position.right),\r\n\t\t\t\ttop: sizeInfoDefault(position && position.top),\r\n\t\t\t\tbottom: sizeInfoDefault(position && position.bottom),\r\n\t\t\t\twidth: sizeInfoDefault(position && position.width),\r\n\t\t\t\theight: sizeInfoDefault(position && position.height),\r\n\t\t\t\tcanResizeLeft: canResizeLeft,\r\n\t\t\t\tcanResizeRight: canResizeRight,\r\n\t\t\t\tcanResizeTop: canResizeTop,\r\n\t\t\t\tcanResizeBottom: canResizeBottom,\r\n\t\t\t},\r\n\t\t} as ISpaceDefinition;\r\n\r\n\t\tnewSpace.anchoredChildren = (children, anchor, zIndex) => {\r\n\t\t\treturn children.filter((s) => s.type === Type.Anchored && s.anchor === anchor && s.zIndex === zIndex);\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustLeft = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.left.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.left.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustRight = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.right.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.right.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustTop = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.top.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.top.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tnewSpace.adjustBottom = (adjusted) => {\r\n\t\t\tif (adjustmentsEqual(newSpace.bottom.adjusted, adjusted)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tnewSpace.bottom.adjusted = adjusted;\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tif (type === Type.Anchored) {\r\n\t\t\tif (anchor === AnchorType.Left) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustLeft;\r\n\t\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustTop;\r\n\t\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustRight;\r\n\t\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\t\tnewSpace.adjustEdge = newSpace.adjustBottom;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newSpace;\r\n\t};\r\n\r\n\tstore.startMouseResize = (resizeType, space, event, onResizeEnd) => {\r\n\t\tresize.startResize(\r\n\t\t\tevent,\r\n\t\t\tresizeType,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Mouse,\r\n\t\t\tMoveEvent.Mouse,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.clientX,\r\n\t\t\t\ty: e.clientY,\r\n\t\t\t}),\r\n\t\t\tonResizeEnd,\r\n\t\t);\r\n\t};\r\n\r\n\tstore.startTouchResize = (resizeType, space, event, onResizeEnd) => {\r\n\t\tresize.startResize(\r\n\t\t\tevent,\r\n\t\t\tresizeType,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Touch,\r\n\t\t\tMoveEvent.Touch,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.touches[0].clientX,\r\n\t\t\t\ty: e.touches[0].clientY,\r\n\t\t\t}),\r\n\t\t\tonResizeEnd,\r\n\t\t);\r\n\t};\r\n\r\n\tstore.startMouseDrag = (space, event, onDragEnd) => {\r\n\t\tdrag.startDrag(\r\n\t\t\tevent,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Mouse,\r\n\t\t\tMoveEvent.Mouse,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.clientX,\r\n\t\t\t\ty: e.clientY,\r\n\t\t\t}),\r\n\t\t\tonDragEnd,\r\n\t\t);\r\n\t};\r\n\r\n\tstore.startTouchDrag = (space, event, onDragEnd) => {\r\n\t\tdrag.startDrag(\r\n\t\t\tevent,\r\n\t\t\tspace,\r\n\t\t\tEndEvent.Touch,\r\n\t\t\tMoveEvent.Touch,\r\n\t\t\t(e) => ({\r\n\t\t\t\tx: e.touches[0].clientX,\r\n\t\t\t\ty: e.touches[0].clientY,\r\n\t\t\t}),\r\n\t\t\tonDragEnd,\r\n\t\t);\r\n\t};\r\n\r\n\treturn store;\r\n}\r\n","import * as React from \"react\";\r\nimport { createStore } from \"./core\";\r\nimport { ISpaceProps, ISpaceStore, ISpaceDefinition, ResizeType, CenterType, ISpaceContext, ICommonProps } from \"./core-types\";\r\nimport { coalesce, shortuuid } from \"./core-utils\";\r\nimport { ResizeSensor } from \"css-element-queries\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport {useEffect, useRef, useState} from 'react';\r\n\r\n// WORKAROUND for React18 strict mode\r\n// https://blog.ag-grid.com/avoiding-react-18-double-mount/\r\nexport const useEffectOnce = (effect: () => void | (() => void)) => {\r\n\tconst destroyFunc = useRef<void | (() => void)>();\r\n\tconst effectCalled = useRef(false);\r\n\tconst renderAfterCalled = useRef(false);\r\n\tconst [_val, setVal] = useState<number>(0);\r\n\r\n\tif (effectCalled.current) {\r\n\t\trenderAfterCalled.current = true;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\t// only execute the effect first time around\r\n\t\tif (!effectCalled.current) {\r\n\t\t\tdestroyFunc.current = effect();\r\n\t\t\teffectCalled.current = true;\r\n\t\t}\r\n\r\n\t\t// this forces one render after the effect is run\r\n\t\tsetVal((val) => val + 1);\r\n\r\n\t\treturn () => {\r\n\t\t\t// if the comp didn't render since the useEffect was called,\r\n\t\t\t// we know it's the dummy React cycle\r\n\t\t\tif (!renderAfterCalled.current) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (destroyFunc.current) {\r\n\t\t\t\tdestroyFunc.current();\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n};\r\n\r\nexport const ParentContext = React.createContext<string | undefined>(undefined);\r\nexport const DOMRectContext = React.createContext<DOMRect | undefined>(undefined);\r\nexport const LayerContext = React.createContext<number | undefined>(undefined);\r\nexport const OptionsContext = React.createContext<IReactSpacesOptions>({});\r\nexport const currentStore = createStore();\r\n\r\nexport const commonProps = {\r\n\tid: PropTypes.string,\r\n\tclassName: PropTypes.string,\r\n\tstyle: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\r\n\tas: PropTypes.any,\r\n\tcenterContent: PropTypes.oneOf([CenterType.None, CenterType.Vertical, CenterType.HorizontalVertical]),\r\n\tzIndex: PropTypes.number,\r\n\tscrollable: PropTypes.bool,\r\n\ttrackSize: PropTypes.bool,\r\n\tallowOverflow: PropTypes.bool,\r\n\thandleRender: PropTypes.func,\r\n\tonClick: PropTypes.func,\r\n\tonDoubleClick: PropTypes.func,\r\n\tonMouseDown: PropTypes.func,\r\n\tonMouseEnter: PropTypes.func,\r\n\tonMouseLeave: PropTypes.func,\r\n\tonMouseMove: PropTypes.func,\r\n\tonTouchStart: PropTypes.func,\r\n\tonTouchMove: PropTypes.func,\r\n\tonTouchEnd: PropTypes.func,\r\n};\r\n\r\nexport interface IReactSpacesOptions {\r\n\tdebug?: boolean;\r\n}\r\n\r\nexport interface IReactEvents {\r\n\tonClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonDoubleClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseDown?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseEnter?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseLeave?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonMouseMove?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonTouchStart?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchMove?: (event: React.TouchEvent<HTMLElement>) => void;\r\n\tonTouchEnd?: (event: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport interface IReactSpaceCommonProps extends ICommonProps, IReactEvents {\r\n\tstyle?: React.CSSProperties;\r\n\tas?: keyof React.ReactDOM | React.ComponentType<ICommonProps>;\r\n}\r\n\r\nexport interface IReactSpaceInnerProps extends IReactSpaceCommonProps, ISpaceProps, IReactEvents {\r\n\thandleRender?: (handleProps: IResizeHandleProps) => React.ReactNode;\r\n}\r\n\r\nexport interface IReactSpacesOptions {\r\n\tdebug?: boolean;\r\n}\r\n\r\nexport function useForceUpdate() {\r\n\tconst [, setTick] = React.useState(0);\r\n\tconst update = React.useCallback(() => {\r\n\t\tsetTick((tick) => tick + 1);\r\n\t}, []);\r\n\treturn update;\r\n}\r\n\r\nexport function useSpace(props: IReactSpaceInnerProps) {\r\n\tconst store = currentStore;\r\n\tconst update = useForceUpdate();\r\n\tconst parent = React.useContext(ParentContext);\r\n\tconst layer = React.useContext(LayerContext);\r\n\tconst { debug } = React.useContext(OptionsContext);\r\n\tconst [spaceId] = React.useState(props.id || `s${shortuuid()}`);\r\n\tconst elementRef = React.useRef<HTMLElement>();\r\n\tconst resizeSensor = React.useRef<ResizeSensor>();\r\n\tconst [domRect, setDomRect] = React.useState<DOMRect>();\r\n\r\n\tlet space = store.getSpace(spaceId)!;\r\n\r\n\tif (debug) {\r\n\t\tconsole.table(store.getSpaces());\r\n\t}\r\n\r\n\tconst parsedProps = {\r\n\t\t...props,\r\n\t\t...{\r\n\t\t\tid: spaceId,\r\n\t\t\tzIndex: coalesce(props.zIndex, layer),\r\n\t\t},\r\n\t};\r\n\r\n\tif (!space) {\r\n\t\tspace = store.createSpace(parent, parsedProps, update);\r\n\t\tstore.addSpace(space);\r\n\t} else {\r\n\t\tstore.updateSpace(space, parsedProps);\r\n\t}\r\n\r\n\tconst resizeHandles = useSpaceResizeHandles(store, space);\r\n\r\n\tuseEffectOnce(() => {\r\n\t\tconst rect = elementRef.current!.getBoundingClientRect() as DOMRect;\r\n\t\tspace!.dimension = {\r\n\t\t\t...rect,\r\n\t\t\t...{\r\n\t\t\t\tleft: Math.floor(rect.left),\r\n\t\t\t\ttop: Math.floor(rect.top),\r\n\t\t\t\tright: Math.floor(rect.right),\r\n\t\t\t\tbottom: Math.floor(rect.bottom),\r\n\t\t\t\twidth: Math.floor(rect.width),\r\n\t\t\t\theight: Math.floor(rect.height),\r\n\t\t\t\tx: Math.floor(rect.x),\r\n\t\t\t\ty: Math.floor(rect.y),\r\n\t\t\t},\r\n\t\t};\r\n\t\tsetDomRect(space!.dimension);\r\n\r\n\t\tif (props.trackSize) {\r\n\t\t\tresizeSensor.current = new ResizeSensor(elementRef.current!, (size) => {\r\n\t\t\t\tspace!.dimension = {\r\n\t\t\t\t\t...rect,\r\n\t\t\t\t\t...{\r\n\t\t\t\t\t\twidth: Math.floor(size.width),\r\n\t\t\t\t\t\theight: Math.floor(size.height),\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tsetDomRect(space!.dimension);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tresizeSensor.current && resizeSensor.current.detach();\r\n\t\t\tstore.removeSpace(space!);\r\n\t\t};\r\n\t});\r\n\r\n\treturn { space: space, resizeHandles: resizeHandles, domRect: domRect, elementRef: elementRef };\r\n}\r\n\r\nexport interface IResizeHandleProps {\r\n\tid?: string;\r\n\tkey: string | number;\r\n\tclassName?: string;\r\n\tonMouseDown: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\r\n\tonTouchStart: (e: React.TouchEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport function useSpaceResizeHandles(store: ISpaceStore, space: ISpaceDefinition) {\r\n\tconst mouseHandles: IResizeHandleProps[] = [];\r\n\r\n\tif (space.canResizeLeft) {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-ml`,\r\n\t\t\tkey: \"left\",\r\n\t\t\tclassName: `spaces-resize-handle resize-left`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(ResizeType.Left, space, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(ResizeType.Left, space, event),\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeRight) {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-mr`,\r\n\t\t\tkey: \"right\",\r\n\t\t\tclassName: `spaces-resize-handle resize-right`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(ResizeType.Right, space, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(ResizeType.Right, space, event),\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeTop) {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-mt`,\r\n\t\t\tkey: \"top\",\r\n\t\t\tclassName: `spaces-resize-handle resize-top`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(ResizeType.Top, space, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(ResizeType.Top, space, event),\r\n\t\t});\r\n\t}\r\n\r\n\tif (space.canResizeBottom) {\r\n\t\tmouseHandles.push({\r\n\t\t\tid: `${space.id}-mb`,\r\n\t\t\tkey: \"bottom\",\r\n\t\t\tclassName: `spaces-resize-handle resize-bottom`,\r\n\t\t\tonMouseDown: (event) => store.startMouseResize(ResizeType.Bottom, space, event),\r\n\t\t\tonTouchStart: (event) => store.startTouchResize(ResizeType.Bottom, space, event),\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tmouseHandles,\r\n\t};\r\n}\r\n\r\nexport function useCurrentSpace() {\r\n\tconst store = currentStore;\r\n\tconst spaceId = React.useContext(ParentContext);\r\n\r\n\tconst space = spaceId ? store.getSpace(spaceId) : undefined;\r\n\r\n\tconst domRect = React.useContext(DOMRectContext);\r\n\tconst layer = React.useContext(LayerContext);\r\n\tconst onMouseDrag = React.useCallback((e, onDragEnd) => (space ? store.startMouseDrag(space, e, onDragEnd) : null), [spaceId]);\r\n\tconst onTouchDrag = React.useCallback((e, onDragEnd) => (space ? store.startTouchDrag(space, e, onDragEnd) : null), [spaceId]);\r\n\tconst onForceUpdate = React.useCallback(() => (space ? store.updateStyles(space) : null), [spaceId]);\r\n\r\n\tconst defaults = { width: 0, height: 0, x: 0, y: 0 };\r\n\tconst size = {\r\n\t\t...defaults,\r\n\t\t...domRect,\r\n\t};\r\n\r\n\treturn {\r\n\t\tsize: size,\r\n\t\tlayer: layer || 0,\r\n\t\tstartMouseDrag: onMouseDrag,\r\n\t\tstartTouchDrag: onTouchDrag,\r\n\t\tforceUpdate: onForceUpdate,\r\n\t} as ISpaceContext;\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport const Centered: React.FC = (props) => <div className={`spaces-centered`}>{props.children}</div>;\r\n","import * as React from \"react\";\r\n\r\nexport const CenteredVertically: React.FC = (props) => <div className={`spaces-centered-vertically`}>{props.children}</div>;\r\n","import { CenterType, ResizeHandlePlacement, AnchorType, Type } from \"../core-types\";\r\nimport {\r\n\tuseSpace,\r\n\tParentContext,\r\n\tLayerContext,\r\n\tDOMRectContext,\r\n\tIReactSpaceInnerProps,\r\n\tuseEffectOnce\r\n} from \"../core-react\";\r\nimport * as React from \"react\";\r\nimport { Centered } from \"./Centered\";\r\nimport { CenteredVertically } from \"./CenteredVertically\";\r\nimport { shortuuid } from \"../core-utils\";\r\n\r\nfunction applyCentering(children: React.ReactNode, centerType: CenterType | undefined) {\r\n\tswitch (centerType) {\r\n\t\tcase CenterType.Vertical:\r\n\t\t\treturn <CenteredVertically>{children}</CenteredVertically>;\r\n\t\tcase CenterType.HorizontalVertical:\r\n\t\t\treturn <Centered>{children}</Centered>;\r\n\t}\r\n\treturn children;\r\n}\r\n\r\nexport class Space extends React.Component<IReactSpaceInnerProps> {\r\n\tpublic render() {\r\n\t\treturn <SpaceInner {...this.props} wrapperInstance={this} />;\r\n\t}\r\n}\r\n\r\nconst SpaceInner: React.FC<IReactSpaceInnerProps & { wrapperInstance: Space }> = (props) => {\r\n\tif (!props.id && !props.wrapperInstance[\"_react_spaces_uniqueid\"]) {\r\n\t\tprops.wrapperInstance[\"_react_spaces_uniqueid\"] = `s${shortuuid()}`;\r\n\t}\r\n\r\n\tconst {\r\n\t\tstyle,\r\n\t\tclassName,\r\n\t\tonClick,\r\n\t\tonDoubleClick,\r\n\t\tonMouseDown,\r\n\t\tonMouseEnter,\r\n\t\tonMouseLeave,\r\n\t\tonMouseMove,\r\n\t\tonTouchStart,\r\n\t\tonTouchMove,\r\n\t\tonTouchEnd,\r\n\t\tchildren,\r\n\t\thandleRender,\r\n\t} = props;\r\n\r\n\tconst events = {\r\n\t\tonClick: onClick,\r\n\t\tonDoubleClick: onDoubleClick,\r\n\t\tonMouseDown: onMouseDown,\r\n\t\tonMouseEnter: onMouseEnter,\r\n\t\tonMouseLeave: onMouseLeave,\r\n\t\tonMouseMove: onMouseMove,\r\n\t\tonTouchStart: onTouchStart,\r\n\t\tonTouchMove: onTouchMove,\r\n\t\tonTouchEnd: onTouchEnd,\r\n\t};\r\n\r\n\tconst { space, domRect, elementRef, resizeHandles } = useSpace({\r\n\t\t...props,\r\n\t\t...{ id: props.id || props.wrapperInstance[\"_react_spaces_uniqueid\"] },\r\n\t});\r\n\r\n\tuseEffectOnce(() => {\r\n\t\tspace.element = elementRef.current!;\r\n\t});\r\n\r\n\tconst userClasses = className ? className.split(\" \").map((c) => c.trim()) : [];\r\n\r\n\tconst outerClasses = [\r\n\t\t...[\"spaces-space\", space.children.find((s) => s.resizing) ? \"spaces-resizing\" : undefined],\r\n\t\t...[space.type === Type.Fixed ? \"spaces-fixedsize-layout\" : undefined],\r\n\t\t...[space.type === Type.ViewPort ? \"spaces-fullpage-layout\" : undefined],\r\n\t\t...userClasses.map((c) => `${c}-container`),\r\n\t].filter((c) => c);\r\n\r\n\tconst innerClasses = [...[\"spaces-space-inner\"], ...userClasses];\r\n\r\n\tlet innerStyle = style;\r\n\tif (space.handlePlacement === ResizeHandlePlacement.Inside) {\r\n\t\tinnerStyle = {\r\n\t\t\t...style,\r\n\t\t\t...{\r\n\t\t\t\tleft: space.anchor === AnchorType.Right ? space.handleSize : undefined,\r\n\t\t\t\tright: space.anchor === AnchorType.Left ? space.handleSize : undefined,\r\n\t\t\t\ttop: space.anchor === AnchorType.Bottom ? space.handleSize : undefined,\r\n\t\t\t\tbottom: space.anchor === AnchorType.Top ? space.handleSize : undefined,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tconst centeredContent = applyCentering(children, props.centerContent);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{resizeHandles.mouseHandles.map((handleProps) => handleRender?.(handleProps) || <div {...handleProps} />)}\r\n\t\t\t{React.createElement(\r\n\t\t\t\tprops.as || \"div\",\r\n\t\t\t\t{\r\n\t\t\t\t\t...{\r\n\t\t\t\t\t\tid: space.id,\r\n\t\t\t\t\t\tref: elementRef,\r\n\t\t\t\t\t\tclassName: outerClasses.join(\" \"),\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...events,\r\n\t\t\t\t},\r\n\t\t\t\t<div className={innerClasses.join(\" \")} style={innerStyle}>\r\n\t\t\t\t\t<ParentContext.Provider value={space.id}>\r\n\t\t\t\t\t\t<LayerContext.Provider value={undefined}>\r\n\t\t\t\t\t\t\t<DOMRectContext.Provider value={domRect}>{centeredContent}</DOMRectContext.Provider>\r\n\t\t\t\t\t\t</LayerContext.Provider>\r\n\t\t\t\t\t</ParentContext.Provider>\r\n\t\t\t\t</div>,\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n","import { SizeUnit, Type, AnchorType, ResizeHandlePlacement } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps, IResizeHandleProps } from \"../core-react\";\r\n\r\nexport interface IResizableProps extends IReactSpaceCommonProps {\r\n\tsize: SizeUnit;\r\n\torder?: number;\r\n\thandleSize?: number;\r\n\ttouchHandleSize?: number;\r\n\thandlePlacement?: ResizeHandlePlacement;\r\n\thandleRender?: (handleProps: IResizeHandleProps) => React.ReactNode;\r\n\tminimumSize?: number;\r\n\tmaximumSize?: number;\r\n\tonResizeStart?: () => void | boolean;\r\n\tonResizeEnd?: (newSize: SizeUnit) => void;\r\n}\r\n\r\nexport const resizableProps = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tsize: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\t\torder: PropTypes.number,\r\n\t\thandleSize: PropTypes.number,\r\n\t\ttouchHandleSize: PropTypes.number,\r\n\t\thandlePlacement: PropTypes.oneOf([ResizeHandlePlacement.Inside, ResizeHandlePlacement.OverlayBoundary, ResizeHandlePlacement.OverlayInside]),\r\n\t\thandleRender: PropTypes.func,\r\n\t\tminimumSize: PropTypes.number,\r\n\t\tmaximumSize: PropTypes.number,\r\n\t\tonResizeStart: PropTypes.func,\r\n\t\tonResizeEnd: PropTypes.func,\r\n\t},\r\n};\r\n\r\nexport interface IAnchorProps extends IResizableProps {\r\n\tresizable?: boolean;\r\n}\r\n\r\nexport const anchoredProps = {\r\n\t...resizableProps,\r\n\t...{\r\n\t\tresizable: PropTypes.bool,\r\n\t},\r\n};\r\n\r\nexport const LeftResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Left} position={{ left: 0, top: 0, bottom: 0, rightResizable: true, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nLeftResizable.propTypes = resizableProps;\r\n\r\nexport const Left: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Left}\r\n\t\tposition={{ left: 0, top: 0, bottom: 0, rightResizable: resizable, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nLeft.propTypes = anchoredProps;\r\n\r\nexport const TopResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Top} position={{ left: 0, top: 0, right: 0, bottomResizable: true, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nTopResizable.propTypes = resizableProps;\r\n\r\nexport const Top: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Top}\r\n\t\tposition={{ left: 0, top: 0, right: 0, bottomResizable: resizable, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nTop.propTypes = anchoredProps;\r\n\r\nexport const RightResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Right} position={{ bottom: 0, top: 0, right: 0, leftResizable: true, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nRightResizable.propTypes = resizableProps;\r\n\r\nexport const Right: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Right}\r\n\t\tposition={{ bottom: 0, top: 0, right: 0, leftResizable: resizable, width: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nRight.propTypes = anchoredProps;\r\n\r\nexport const BottomResizable: React.FC<IResizableProps> = ({ children, size, ...props }) => (\r\n\t<Space {...props} type={Type.Anchored} anchor={AnchorType.Bottom} position={{ bottom: 0, left: 0, right: 0, topResizable: true, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nBottomResizable.propTypes = resizableProps;\r\n\r\nexport const Bottom: React.FC<IAnchorProps> = ({ size, children, resizable, ...commonProps }) => (\r\n\t<Space\r\n\t\t{...commonProps}\r\n\t\ttype={Type.Anchored}\r\n\t\tanchor={AnchorType.Bottom}\r\n\t\tposition={{ bottom: 0, left: 0, right: 0, topResizable: resizable, height: size }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nBottom.propTypes = anchoredProps;\r\n","import { Type, SizeUnit, IPositionalProps, AnchorType, ResizeType } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { IReactSpaceCommonProps } from \"../core-react\";\r\nimport { anchoredProps, IAnchorProps } from \"./Anchored\";\r\n\r\ntype ICustomProps = Omit<IReactSpaceCommonProps & IAnchorProps, \"size\"> & {\r\n\ttype?: Type;\r\n\r\n\t// Anchored\r\n\tanchor?: AnchorType;\r\n\tanchorSize?: SizeUnit;\r\n\r\n\t// Positioned\r\n\tleft?: SizeUnit | undefined;\r\n\ttop?: SizeUnit | undefined;\r\n\tright?: SizeUnit | undefined;\r\n\tbottom?: SizeUnit | undefined;\r\n\twidth?: SizeUnit | undefined;\r\n\theight?: SizeUnit | undefined;\r\n\tresizeTypes?: ResizeType[];\r\n};\r\n\r\nconst customProps = {\r\n\t...anchoredProps,\r\n\t...{\r\n\t\ttype: PropTypes.oneOf([Type.Positioned, Type.Fill, Type.Anchored]),\r\n\r\n\t\tanchor: PropTypes.oneOf([AnchorType.Left, AnchorType.Top, AnchorType.Right, AnchorType.Bottom]),\r\n\t\tanchorSize: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tresizeTypes: PropTypes.array,\r\n\t},\r\n};\r\n\r\nexport const Custom: React.FC<ICustomProps> = ({\r\n\tchildren,\r\n\ttype,\r\n\tleft,\r\n\ttop,\r\n\tright,\r\n\tbottom,\r\n\twidth,\r\n\theight,\r\n\tanchorSize,\r\n\tanchor,\r\n\tresizable,\r\n\tresizeTypes,\r\n\t...props\r\n}) => {\r\n\tlet position: IPositionalProps;\r\n\ttype = type || Type.Fill;\r\n\r\n\tif (type === Type.Positioned) {\r\n\t\tposition = {\r\n\t\t\tleft: left,\r\n\t\t\ttop: top,\r\n\t\t\tright: right,\r\n\t\t\tbottom: bottom,\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tleftResizable: resizeTypes && resizeTypes.includes(ResizeType.Left),\r\n\t\t\ttopResizable: resizeTypes && resizeTypes.includes(ResizeType.Top),\r\n\t\t\trightResizable: resizeTypes && resizeTypes.includes(ResizeType.Right),\r\n\t\t\tbottomResizable: resizeTypes && resizeTypes.includes(ResizeType.Bottom),\r\n\t\t};\r\n\t} else {\r\n\t\tif (anchor === AnchorType.Left) {\r\n\t\t\tposition = { left: 0, top: 0, bottom: 0, width: anchorSize, rightResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Right) {\r\n\t\t\tposition = { right: 0, top: 0, bottom: 0, width: anchorSize, leftResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Top) {\r\n\t\t\tposition = { left: 0, top: 0, right: 0, height: anchorSize, bottomResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else if (anchor === AnchorType.Bottom) {\r\n\t\t\tposition = { left: 0, bottom: 0, right: 0, height: anchorSize, topResizable: resizable };\r\n\t\t\ttype = Type.Anchored;\r\n\t\t} else {\r\n\t\t\tposition = {\r\n\t\t\t\tleft: 0,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t};\r\n\t\t\ttype = Type.Fill;\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Space {...props} type={type} anchor={anchor} position={position}>\r\n\t\t\t{children}\r\n\t\t</Space>\r\n\t);\r\n};\r\n\r\nCustom.propTypes = customProps;\r\n","import { Type } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\nexport const Fill: React.FC<IReactSpaceCommonProps> = (props) => (\r\n\t<Space {...props} type={Type.Fill} position={{ left: 0, top: 0, right: 0, bottom: 0 }}>\r\n\t\t{props.children}\r\n\t</Space>\r\n);\r\n\r\nFill.propTypes = commonProps;\r\n","import { SizeUnit, Type } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\ninterface IFixedProps extends IReactSpaceCommonProps {\r\n\twidth?: SizeUnit;\r\n\theight: SizeUnit;\r\n}\r\n\r\nexport const Fixed: React.FC<IFixedProps> = ({ width, height, children, ...commonProps }) => (\r\n\t<Space {...commonProps} type={Type.Fixed} position={{ width: width, height: height }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nFixed.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { LayerContext } from \"../core-react\";\r\nimport * as PropTypes from \"prop-types\";\r\n\r\nexport const Layer: React.FC<{ zIndex: number }> = (props) => <LayerContext.Provider value={props.zIndex}>{props.children}</LayerContext.Provider>;\r\n\r\nLayer.propTypes = {\r\n\tzIndex: PropTypes.number.isRequired,\r\n};\r\n","import { Type, SizeUnit, ResizeType } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\ninterface IPositionedProps extends IReactSpaceCommonProps {\r\n\tleft?: SizeUnit;\r\n\ttop?: SizeUnit;\r\n\tright?: SizeUnit;\r\n\tbottom?: SizeUnit;\r\n\twidth?: SizeUnit;\r\n\theight?: SizeUnit;\r\n\tresizable?: ResizeType[];\r\n\tonResizeStart?: () => void | boolean;\r\n\tonResizeEnd?: (newSize: SizeUnit) => void;\r\n}\r\n\r\nexport const Positioned: React.FC<IPositionedProps> = ({ left, top, right, bottom, width, height, resizable, ...props }) => {\r\n\tconst resizeTypes = resizable || [];\r\n\r\n\treturn (\r\n\t\t<Space\r\n\t\t\t{...props}\r\n\t\t\ttype={Type.Positioned}\r\n\t\t\tposition={{\r\n\t\t\t\tleft: left,\r\n\t\t\t\tleftResizable: resizeTypes.includes(ResizeType.Left),\r\n\t\t\t\ttop: top,\r\n\t\t\t\ttopResizable: resizeTypes.includes(ResizeType.Top),\r\n\t\t\t\tright: right,\r\n\t\t\t\trightResizable: resizeTypes.includes(ResizeType.Right),\r\n\t\t\t\tbottom: bottom,\r\n\t\t\t\tbottomResizable: resizeTypes.includes(ResizeType.Bottom),\r\n\t\t\t\twidth: width,\r\n\t\t\t\theight: height,\r\n\t\t\t}}>\r\n\t\t\t{props.children}\r\n\t\t</Space>\r\n\t);\r\n};\r\n\r\nPositioned.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\twidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\theight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tresizable: PropTypes.array,\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { DOMRectContext } from \"../core-react\";\r\n\r\ninterface ISpaceInfoProps {\r\n\tchildren: (info: DOMRect) => JSX.Element;\r\n}\r\n\r\n/**\r\n * @deprecated use useCurrentSpace() hook instead\r\n */\r\nexport const Info: React.FC<ISpaceInfoProps> = (props) => {\r\n\tconst domRect = React.useContext(DOMRectContext);\r\n\r\n\tif (domRect) {\r\n\t\treturn props.children(domRect);\r\n\t}\r\n\r\n\treturn props.children({ left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0, x: 0, y: 0, toJSON: () => \"\" });\r\n};\r\n","import { Type, SizeUnit } from \"../core-types\";\r\nimport * as React from \"react\";\r\nimport { Space } from \"./Space\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport { commonProps, IReactSpaceCommonProps } from \"../core-react\";\r\n\r\ninterface IViewPortProps extends IReactSpaceCommonProps {\r\n\tleft?: SizeUnit;\r\n\tright?: SizeUnit;\r\n\ttop?: SizeUnit;\r\n\tbottom?: SizeUnit;\r\n}\r\n\r\nexport const ViewPort: React.FC<IViewPortProps> = ({ left, top, right, bottom, children, ...commonProps }) => (\r\n\t<Space {...commonProps} type={Type.ViewPort} position={{ left: left || 0, top: top || 0, right: right || 0, bottom: bottom || 0 }}>\r\n\t\t{children}\r\n\t</Space>\r\n);\r\n\r\nViewPort.propTypes = {\r\n\t...commonProps,\r\n\t...{\r\n\t\tleft: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tright: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\tbottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t},\r\n};\r\n","import * as React from \"react\";\r\nimport { IReactSpacesOptions, OptionsContext } from \"../core-react\";\r\n\r\nexport const Options: React.FC<IReactSpacesOptions> = ({ children, ...opts }) => {\r\n\treturn <OptionsContext.Provider value={opts}>{children}</OptionsContext.Provider>;\r\n};\r\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","Orientation","MoveEvent","EndEvent","shortuuid","firstPart","Math","random","secondPart","toString","slice","getSizeString","size","dontAddCalc","adjusted","length","resized","parts","undefined","push","forEach","l","join","coalesce","_i","args","find","x","adjustmentsEqual","item1","item2","i","len","throttle","callback","limit","wait","setTimeout","styleDefinition","space","cssElements","position","left","top","right","bottom","width","height","zIndex","cssString","allowOverflow","id","scrollable","handleOffset","touchHandleSize","handleSize","handlePlacement","ResizeHandlePlacement","Inside","OverlayInside","Type","Positioned","OverlayBoundary","canResizeLeft","canResizeTop","canResizeRight","canResizeBottom","updateStyleDefinition","definition","existing","getElementById","innerHTML","newStyle","removeStyleDefinition","removeChild","AnchorType","ResizeType","CenterType","RESIZE_THROTTLE","isHorizontal","resizeType","Left","Right","createAdjuster","originalX","originalY","dimensionToAdjust","Bottom","Top","Error","negater","val","candidateOppositeDimensionToAdjust","offset1","offset2","rect","element","getBoundingClientRect","minimumAdjust","minimumSize","maximumAdjust","maximumSize","currentX","currentY","adjustment","dimensionResized","max","createResize","store","startResize","e","endEvent","moveEvent","getCoords","onResizeEnd","onResizeStart","result","originalCoords","adjuster","y","resizing","updateParent","resize","updateStyles","withPreventDefault","moved","newCoords","lastX","lastY","preventDefault","window","requestAnimationFrame","removeListener","removeEventListener","resizeEnd","currentRect","floor","addEventListener","createDrag","startDrag","onDragEnd","coords","adjustedLeft","adjustedTop","originalMouseX_1","originalMouseY_1","lastX_1","lastY_1","moved_1","mouseMove_1","adjustmentX","adjustmentY","throttledMouseMove_1","withPreventDefault_1","removeListener_1","_a","parentInfo","parentId","getSpace","info","spaceDefaults","centerContent","dimension","toJSON","adjustLeft","adjustRight","adjustTop","adjustBottom","adjustEdge","anchoredChildren","anchorTypes","getPosition","ViewPort","Fixed","getOrientation","anchor","Vertical","Horizontal","anchorUpdates","update","sizeInfoDefault","createStore","getSpaces","s","recalcSpaces","parent","spaces","onlyUnique","value","index","self","indexOf","orderedSpaces","children","t","anchoredSpaces","filter","map","anchoredSpacesInLayer","c","order","unorderedSpaces","maxOrder","a","reduce","b","idx","changed","Fill","as","orientation","Anchored","adjusted_1","addSpace","parentSpace","removeSpace","newSpaces","parent_1","updateSpace","props","leftResizable","rightResizable","topResizable","bottomResizable","None","createSpace","startMouseResize","startTouchResize","startMouseDrag","startTouchDrag","drag","commonProps","newSpace","__assign","event","Mouse","clientX","clientY","Touch","touches","useEffectOnce","effect","destroyFunc","useRef","effectCalled","renderAfterCalled","useState","setVal","current","useEffect","ParentContext","React","createContext","DOMRectContext","LayerContext","OptionsContext","currentStore","PropTypes","string","className","oneOfType","object","array","any","oneOf","HorizontalVertical","number","bool","trackSize","handleRender","func","onClick","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","useForceUpdate","setTick","useCallback","tick","useSpace","useContext","layer","debug","spaceId","elementRef","resizeSensor","domRect","setDomRect","console","table","parsedProps","resizeHandles","useSpaceResizeHandles","ResizeSensor","detach","mouseHandles","key","useCurrentSpace","onMouseDrag","onTouchDrag","onForceUpdate","forceUpdate","Centered","CenteredVertically","applyCentering","centerType","__extends","Space","SpaceInner","this","wrapperInstance","Component","events","userClasses","split","trim","outerClasses","__spreadArray","innerClasses","innerStyle","centeredContent","handleProps","Provider","resizableProps","isRequired","anchoredProps","resizable","LeftResizable","propTypes","TopResizable","RightResizable","BottomResizable","customProps","anchorSize","resizeTypes","Custom","includes","Layer","Info","Options","opts"],"mappings":"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"}